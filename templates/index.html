{% extends "layout.html" %} {% block content %}
<h2 class="p-2 text-light-text-primary dark:text-dark-text-primary">
   {{t.results_for}}"{{ t.get(query) if t.get(query) else query }}"
</h2>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5  gap-4 mt-4">
  {% for a in articles %}
  <article
    class="bg-light-card-bg dark:bg-dark-card-bg border-gray-200 dark:border-slate-900"
  >
    <h3 class="p-3 mb-1 font-bold">{{ a.title }}</h3>
    <p class="p-3 pb-1">
      {{ a.source_id }} â€” {{ a.pubDate[:10] if a.pubDate }}
    </p>
    {% if a.image_url %}
    <img
      src="{{ a.image_url or './static/img/placeholder.png' }}"
      alt="thumb"
      class="w-full mb-2"
      onerror="this.onerror=null; this.src='/static/img/placeholder.png';"
    />
    {% endif %} {% if a.description%}
    <p class="p-3">{{a.description[:200]}}...</p>
    {% else %}
    <p class="p-3 text-gray-400">{{t.no_description}}</p>

    {%endif%}
    <p class="p-3 pb-2">
      <a href="{{ url_for('article', url=a.link, title=a.title, description=a.description, image=a.image_url, source=a.source_id, date=a.pubDate, lang=lang, content=a.content, author=a.author) }}" target="_blank" rel="noopener" 
         class="text-light-header-bg hover:underline text-sm font-medium"
      >{{t.view_article}}</a>
    </p>
  </article>
  {% else %}
  <p>{{t.no_articles}}</p>
  {% endfor %}
</div>

<!-- simple pagination controls -->
<div class="py-8 px-2 flex justify-center items-center gap-4">
  {% if total_pages and page > 1 %}
  <a href="?q={{query}}&lang={{lang}}&page={{page-1}}" class="bg-light-header-bg text-white px-4 py-2 rounded hover:bg-dark-header-bg transition-colors">{{t.previous}}</a>
  {%else%}
  <span class='px-4 py-2 bg-gray-300 text-gray-500 rounded cursor-not-allowed'>{{t.previous}}</span>
  {% endif %} 
  <span>{{t.page}} {{ page }} {% if total_pages%} {{t.of}} {{total_pages}}{%endif%}</span>
  {% if total_pages and page <total_pages %}
  <a href="?q={{query}}&lang={{lang}}&page={{page+1}}" class="bg-light-header-bg text-white px-4 py-2 rounded hover:bg-dark-header-bg transition-colors">{{t.next}}</a>
  {%else%}
  <span class='px-4 py-2 bg-gray-300 text-gray-500 rounded cursor-not-allowed'>{{t.next}}</span>
  {% endif %}
</div>
{% endblock %}
